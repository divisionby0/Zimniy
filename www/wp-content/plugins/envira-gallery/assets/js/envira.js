// enviratope 1.5.26.
;(function(n,f,i){var s=n.document;var w=s.documentElement;var k=n.Modernizr;var p=function(z){return z.charAt(0).toUpperCase()+z.slice(1)};var u="Moz Webkit O Ms".split(" ");var o=function(D){var C=w.style,A;if(typeof C[D]==="string"){return D}D=p(D);for(var B=0,z=u.length;B<z;B++){A=u[B]+D;if(typeof C[A]==="string"){return A}}};var c=o("transform"),v=o("transitionProperty");
;var j={csstransforms:function(){return !!c},csstransforms3d:function(){var B=!!o("perspective");if(B&&"webkitPerspective" in w.style){var A=f("<style>@media (transform-3d),(-webkit-transform-3d){#modernizr{height:3px}}</style>").appendTo("head"),z=f('<div id="modernizr" />').appendTo("html");B=z.height()===3;z.remove();A.remove()}return B},csstransitions:function(){return !!v}};var m;if(k){for(m in j){if(!k.hasOwnProperty(m)){k.addTest(m,j[m])}}}else{k=n.Modernizr={_version:"1.6ish: miniModernizr for enviratope"};var y=" ";var q;for(m in j){q=j[m]();k[m]=q;y+=" "+(q?"":"no-")+m}f("html").addClass(y)}if(k.csstransforms){var e=k.csstransforms3d?{translate:function(z){return"translate3d("+z[0]+"px, "+z[1]+"px, 0) "},scale:function(z){return"scale3d("+z+", "+z+", 1) "}}:{translate:function(z){return"translate("+z[0]+"px, "+z[1]+"px) "},scale:function(z){return"scale("+z+") "}};var t=function(C,A,H){var F=f.data(C,"isoTransform")||{},J={},B,D={},G;J[A]=H;f.extend(F,J);for(B in F){G=F[B];D[B]=e[B](G)}var E=D.translate||"",I=D.scale||"",z=E+I;f.data(C,"isoTransform",F);C.style[c]=z};f.cssNumber.scale=true;f.cssHooks.scale={set:function(z,A){t(z,"scale",A)},get:function(B,A){var z=f.data(B,"isoTransform");return z&&z.scale?z.scale:1}};f.fx.step.scale=function(z){f.cssHooks.scale.set(z.elem,z.now+z.unit)};f.cssNumber.translate=true;f.cssHooks.translate={set:function(z,A){t(z,"translate",A)},get:function(B,A){var z=f.data(B,"isoTransform");return z&&z.translate?z.translate:[0,0]}}}var b,a;if(k.csstransitions){b={WebkitTransitionProperty:"webkitTransitionEnd",MozTransitionProperty:"transitionend",OTransitionProperty:"oTransitionEnd otransitionend",transitionProperty:"transitionend"}[v];a=o("transitionDuration")}var l=f.event,h=f.event.handle?"handle":"dispatch",d;l.special.smartresize={setup:function(){f(this).bind("resize",l.special.smartresize.handler)},teardown:function(){f(this).unbind("resize",l.special.smartresize.handler)},handler:function(C,z){var B=this,A=arguments;C.type="smartresize";if(d){clearTimeout(d)}d=setTimeout(function(){l[h].apply(B,A)},z==="execAsap"?0:100)}};f.fn.smartresize=function(z){return z?this.bind("smartresize",z):this.trigger("smartresize",["execAsap"])};f.enviratope=function(z,A,B){this.element=f(A);this._create(z);this._init(B)};var g=["width","height"];var r=f(n);f.enviratope.settings={resizable:true,layoutMode:"masonry",containerClass:"enviratope",itemClass:"enviratope-item",hiddenClass:"enviratope-hidden",hiddenStyle:{opacity:0,scale:0.001},visibleStyle:{opacity:1,scale:1},containerStyle:{position:"relative",overflow:"hidden"},animationEngine:"best-available",animationOptions:{queue:false,duration:800},sortBy:"original-order",sortAscending:true,resizesContainer:true,transformsEnabled:true,itemPositionDataEnabled:false};f.enviratope.prototype={_create:function(E){this.options=f.extend({},f.enviratope.settings,E);this.styleQueue=[];this.elemCount=0;var C=this.element[0].style;this.originalStyle={};var B=g.slice(0);for(var G in this.options.containerStyle){B.push(G)}for(var F=0,A=B.length;F<A;F++){G=B[F];this.originalStyle[G]=C[G]||""}this.element.css(this.options.containerStyle);this._updateAnimationEngine();this._updateUsingTransforms();var D={"original-order":function(I,H){H.elemCount++;return H.elemCount},random:function(){return Math.random()}};this.options.getSortData=f.extend(this.options.getSortData,D);this.reloadItems();this.offset={left:parseInt((this.element.css("padding-left")||0),10),top:parseInt((this.element.css("padding-top")||0),10)};var z=this;setTimeout(function(){z.element.addClass(z.options.containerClass)},0);if(this.options.resizable){r.bind("smartresize.enviratope",function(){z.resize()})}this.element.delegate("."+this.options.hiddenClass,"click",function(){return false})},_getAtoms:function(C){var z=this.options.itemSelector,B=z?C.filter(z).add(C.find(z)):C,A={position:"absolute"};B=B.filter(function(D,E){return E.nodeType===1});if(this.usingTransforms){A.left=0;A.top=0}B.css(A).addClass(this.options.itemClass);this.updateSortData(B,true);return B},_init:function(z){this.$filteredAtoms=this._filter(this.$allAtoms);this._sort();this.reLayout(z)},option:function(B){if(f.isPlainObject(B)){this.options=f.extend(true,this.options,B);var z;for(var A in B){z="_update"+p(A);if(this[z]){this[z]()}}}},_updateAnimationEngine:function(){var A=this.options.animationEngine.toLowerCase().replace(/[ _\-]/g,"");var z;switch(A){case"css":case"none":z=false;break;case"jquery":z=true;break;default:z=!k.csstransitions}this.isUsingJQueryAnimation=z;this._updateUsingTransforms()},_updateTransformsEnabled:function(){this._updateUsingTransforms()},_updateUsingTransforms:function(){var z=this.usingTransforms=this.options.transformsEnabled&&k.csstransforms&&k.csstransitions&&!this.isUsingJQueryAnimation;if(!z){delete this.options.hiddenStyle.scale;delete this.options.visibleStyle.scale}this.getPositionStyles=z?this._translate:this._positionAbs},_filter:function(F){var B=this.options.filter===""?"*":this.options.filter;if(!B){return F}var E=this.options.hiddenClass,A="."+E,D=F.filter(A),z=D;if(B!=="*"){z=D.filter(B);var C=F.not(A).not(B).addClass(E);this.styleQueue.push({$el:C,style:this.options.hiddenStyle})}this.styleQueue.push({$el:z,style:this.options.visibleStyle});z.removeClass(E);return F.filter(B)},updateSortData:function(E,B){var A=this,C=this.options.getSortData,D,z;E.each(function(){D=f(this);z={};for(var F in C){if(!B&&F==="original-order"){z[F]=f.data(this,"enviratope-sort-data")[F]}else{z[F]=C[F](D,A)}}f.data(this,"enviratope-sort-data",z)})},_sort:function(){var C=this.options.sortBy,B=this._getSorter,z=this.options.sortAscending?1:-1,A=function(G,F){var E=B(G,C),D=B(F,C);if(E===D&&C!=="original-order"){E=B(G,"original-order");D=B(F,"original-order")}return((E>D)?1:(E<D)?-1:0)*z};this.$filteredAtoms.sort(A)},_getSorter:function(z,A){return f.data(z,"enviratope-sort-data")[A]},_translate:function(z,A){return{translate:[z,A]}},_positionAbs:function(z,A){return{left:z,top:A}},_pushPosition:function(B,A,C){A=Math.round(A+this.offset.left);C=Math.round(C+this.offset.top);var z=this.getPositionStyles(A,C);this.styleQueue.push({$el:B,style:z});if(this.options.itemPositionDataEnabled){B.data("enviratope-item-position",{x:A,y:C})}},layout:function(C,B){var A=this.options.layoutMode;this["_"+A+"Layout"](C);if(this.options.resizesContainer){var z=this["_"+A+"GetContainerSize"]();this.styleQueue.push({$el:this.element,style:z})}this._processStyleQueue(C,B);this.isLaidOut=true},_processStyleQueue:function(A,P){var C=!this.isLaidOut?"css":(this.isUsingJQueryAnimation?"animate":"css"),F=this.options.animationOptions,G=this.options.onLayout,N,D,J,K;D=function(Q,R){R.$el[C](R.style,F)};if(this._isInserting&&this.isUsingJQueryAnimation){D=function(Q,R){N=R.$el.hasClass("no-transition")?"css":C;R.$el[N](R.style,F)}}else{if(P||G||F.complete){var B=false,I=[P,G,F.complete],O=this;J=true;K=function(){if(B){return}var S;for(var R=0,Q=I.length;R<Q;R++){S=I[R];if(typeof S==="function"){S.call(O.element,A,O)}}B=true};if(this.isUsingJQueryAnimation&&C==="animate"){F.complete=K;J=false}else{if(k.csstransitions){var H=0,L=this.styleQueue[0],M=L&&L.$el,z;while(!M||!M.length){z=this.styleQueue[H++];if(!z){return}M=z.$el}var E=parseFloat(getComputedStyle(M[0])[a]);if(E>0){D=function(Q,R){R.$el[C](R.style,F).one(b,K)};J=false}}}}}f.each(this.styleQueue,D);if(J){K()}this.styleQueue=[]},resize:function(){if(this["_"+this.options.layoutMode+"ResizeChanged"]()){this.reLayout()}},reLayout:function(z){this["_"+this.options.layoutMode+"Reset"]();this.layout(this.$filteredAtoms,z)},addItems:function(A,B){var z=this._getAtoms(A);this.$allAtoms=this.$allAtoms.add(z);if(B){B(z)}},insert:function(A,B){this.element.append(A);var z=this;this.addItems(A,function(C){var D=z._filter(C);z._addHideAppended(D);z._sort();z.reLayout();z._revealAppended(D,B)})},appended:function(A,B){var z=this;this.addItems(A,function(C){z._addHideAppended(C);z.layout(C);z._revealAppended(C,B)})},_addHideAppended:function(z){this.$filteredAtoms=this.$filteredAtoms.add(z);z.addClass("no-transition");this._isInserting=true;this.styleQueue.push({$el:z,style:this.options.hiddenStyle})},_revealAppended:function(A,B){var z=this;setTimeout(function(){A.removeClass("no-transition");z.styleQueue.push({$el:A,style:z.options.visibleStyle});z._isInserting=false;z._processStyleQueue(A,B)},10)},reloadItems:function(){this.$allAtoms=this._getAtoms(this.element.children())},remove:function(B,C){this.$allAtoms=this.$allAtoms.not(B);this.$filteredAtoms=this.$filteredAtoms.not(B);var z=this;var A=function(){B.remove();if(C){C.call(z.element)}};if(B.filter(":not(."+this.options.hiddenClass+")").length){this.styleQueue.push({$el:B,style:this.options.hiddenStyle});this._sort();this.reLayout(A)}else{A()}},shuffle:function(z){this.updateSortData(this.$allAtoms);this.options.sortBy="random";this._sort();this.reLayout(z)},destroy:function(){var B=this.usingTransforms;var A=this.options;this.$allAtoms.removeClass(A.hiddenClass+" "+A.itemClass).each(function(){var D=this.style;D.position="";D.top="";D.left="";D.opacity="";if(B){D[c]=""}});var z=this.element[0].style;for(var C in this.originalStyle){z[C]=this.originalStyle[C]}this.element.unbind(".enviratope").undelegate("."+A.hiddenClass,"click").removeClass(A.containerClass).removeData("enviratope");r.unbind(".enviratope")},_getSegments:function(F){var C=this.options.layoutMode,B=F?"rowHeight":"columnWidth",A=F?"height":"width",E=F?"rows":"cols",G=this.element[A](),z,D=this.options[C]&&this.options[C][B]||this.$filteredAtoms["outer"+p(A)](true)||G;z=Math.floor(G/D);z=Math.max(z,1);this[C][E]=z;this[C][B]=D},_checkIfSegmentsChanged:function(C){var A=this.options.layoutMode,B=C?"rows":"cols",z=this[A][B];this._getSegments(C);return(this[A][B]!==z)},_masonryReset:function(){this.masonry={};this._getSegments();var z=this.masonry.cols;this.masonry.colYs=[];while(z--){this.masonry.colYs.push(0)}},_masonryLayout:function(B){var z=this,A=z.masonry;B.each(function(){var G=f(this),E=Math.ceil(G.outerWidth(true)/A.columnWidth);E=Math.min(E,A.cols);if(E===1){z._masonryPlaceBrick(G,A.colYs)}else{var H=A.cols+1-E,D=[],F,C;for(C=0;C<H;C++){F=A.colYs.slice(C,C+E);D[C]=Math.max.apply(Math,F)}z._masonryPlaceBrick(G,D)}})},_masonryPlaceBrick:function(C,G){var z=Math.min.apply(Math,G),I=0;for(var B=0,D=G.length;B<D;B++){if(G[B]===z){I=B;break}}var H=this.masonry.columnWidth*I,F=z;this._pushPosition(C,H,F);var E=z+C.outerHeight(true),A=this.masonry.cols+1-D;for(B=0;B<A;B++){this.masonry.colYs[I+B]=E}},_masonryGetContainerSize:function(){var z=Math.max.apply(Math,this.masonry.colYs);return{height:z}},_masonryResizeChanged:function(){return this._checkIfSegmentsChanged()},_fitRowsReset:function(){this.fitRows={x:0,y:0,height:0}},_fitRowsLayout:function(C){var z=this,B=this.element.width(),A=this.fitRows;C.each(function(){var F=f(this),E=F.outerWidth(true),D=F.outerHeight(true);if(A.x!==0&&E+A.x>B){A.x=0;A.y=A.height}z._pushPosition(F,A.x,A.y);A.height=Math.max(A.y+D,A.height);A.x+=E})},_fitRowsGetContainerSize:function(){return{height:this.fitRows.height}},_fitRowsResizeChanged:function(){return true},_cellsByRowReset:function(){this.cellsByRow={index:0};this._getSegments();this._getSegments(true)},_cellsByRowLayout:function(B){var z=this,A=this.cellsByRow;B.each(function(){var E=f(this),D=A.index%A.cols,F=Math.floor(A.index/A.cols),C=(D+0.5)*A.columnWidth-E.outerWidth(true)/2,G=(F+0.5)*A.rowHeight-E.outerHeight(true)/2;z._pushPosition(E,C,G);A.index++})},_cellsByRowGetContainerSize:function(){return{height:Math.ceil(this.$filteredAtoms.length/this.cellsByRow.cols)*this.cellsByRow.rowHeight+this.offset.top}},_cellsByRowResizeChanged:function(){return this._checkIfSegmentsChanged()},_straightDownReset:function(){this.straightDown={y:0}},_straightDownLayout:function(A){var z=this;A.each(function(B){var C=f(this);z._pushPosition(C,0,z.straightDown.y);z.straightDown.y+=C.outerHeight(true)})},_straightDownGetContainerSize:function(){return{height:this.straightDown.y}},_straightDownResizeChanged:function(){return true},_masonryHorizontalReset:function(){this.masonryHorizontal={};this._getSegments(true);var z=this.masonryHorizontal.rows;this.masonryHorizontal.rowXs=[];while(z--){this.masonryHorizontal.rowXs.push(0)}},_masonryHorizontalLayout:function(B){var z=this,A=z.masonryHorizontal;B.each(function(){var G=f(this),E=Math.ceil(G.outerHeight(true)/A.rowHeight);E=Math.min(E,A.rows);if(E===1){z._masonryHorizontalPlaceBrick(G,A.rowXs)}else{var H=A.rows+1-E,D=[],F,C;for(C=0;C<H;C++){F=A.rowXs.slice(C,C+E);D[C]=Math.max.apply(Math,F)}z._masonryHorizontalPlaceBrick(G,D)}})},_masonryHorizontalPlaceBrick:function(C,H){var z=Math.min.apply(Math,H),F=0;for(var B=0,D=H.length;B<D;B++){if(H[B]===z){F=B;break}}var I=z,G=this.masonryHorizontal.rowHeight*F;this._pushPosition(C,I,G);var E=z+C.outerWidth(true),A=this.masonryHorizontal.rows+1-D;for(B=0;B<A;B++){this.masonryHorizontal.rowXs[F+B]=E}},_masonryHorizontalGetContainerSize:function(){var z=Math.max.apply(Math,this.masonryHorizontal.rowXs);return{width:z}},_masonryHorizontalResizeChanged:function(){return this._checkIfSegmentsChanged(true)},_fitColumnsReset:function(){this.fitColumns={x:0,y:0,width:0}},_fitColumnsLayout:function(C){var z=this,B=this.element.height(),A=this.fitColumns;C.each(function(){var F=f(this),E=F.outerWidth(true),D=F.outerHeight(true);if(A.y!==0&&D+A.y>B){A.x=A.width;A.y=0}z._pushPosition(F,A.x,A.y);A.width=Math.max(A.x+E,A.width);A.y+=D})},_fitColumnsGetContainerSize:function(){return{width:this.fitColumns.width}},_fitColumnsResizeChanged:function(){return true},_cellsByColumnReset:function(){this.cellsByColumn={index:0};this._getSegments();this._getSegments(true)},_cellsByColumnLayout:function(B){var z=this,A=this.cellsByColumn;B.each(function(){var E=f(this),D=Math.floor(A.index/A.rows),F=A.index%A.rows,C=(D+0.5)*A.columnWidth-E.outerWidth(true)/2,G=(F+0.5)*A.rowHeight-E.outerHeight(true)/2;z._pushPosition(E,C,G);A.index++})},_cellsByColumnGetContainerSize:function(){return{width:Math.ceil(this.$filteredAtoms.length/this.cellsByColumn.rows)*this.cellsByColumn.columnWidth}},_cellsByColumnResizeChanged:function(){return this._checkIfSegmentsChanged(true)},_straightAcrossReset:function(){this.straightAcross={x:0}},_straightAcrossLayout:function(A){var z=this;A.each(function(B){var C=f(this);z._pushPosition(C,z.straightAcross.x,0);z.straightAcross.x+=C.outerWidth(true)})},_straightAcrossGetContainerSize:function(){return{width:this.straightAcross.x}},_straightAcrossResizeChanged:function(){return true}};
;f.fn.imagesLoaded=function(G){var E=this,C=E.find("img").add(E.filter("img")),z=C.length,F="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",B=[];function D(){G.call(E,C)}function A(I){var H=I.target;if(H.src!==F&&f.inArray(H,B)===-1){B.push(H);if(--z<=0){setTimeout(D);C.unbind(".imagesLoaded",A)}}}if(!z){D()}C.bind("load.imagesLoaded error.imagesLoaded",A).each(function(){var H=this.src;this.src=F;this.src=H});return E};var x=function(z){if(n.console){n.console.error(z)}};f.fn.enviratope=function(A,B){if(typeof A==="string"){var z=Array.prototype.slice.call(arguments,1);this.each(function(){var C=f.data(this,"enviratope");if(!C){x("cannot call methods on enviratope prior to initialization; attempted to call method '"+A+"'");return}if(!f.isFunction(C[A])||A.charAt(0)==="_"){x("no such method '"+A+"' for enviratope instance");return}C[A].apply(C,z)})}else{this.each(function(){var C=f.data(this,"enviratope");if(C){C.option(A);C._init(B)}else{f.data(this,"enviratope",new f.enviratope(A,this,B))}})}return this}})(window,jQuery);
// Isoptope custom extensions and methods.
jQuery.enviratope.prototype._getMasonryGutterColumns=function(){var a=this.options.masonry&&this.options.masonry.gutterWidth||0;containerWidth=this.element.width();this.masonry.columnWidth=this.options.masonry&&this.options.masonry.columnWidth||this.$filteredAtoms.outerWidth(true)||containerWidth;this.masonry.columnWidth+=a;this.masonry.cols=Math.floor((containerWidth+a)/this.masonry.columnWidth);this.masonry.cols=Math.max(this.masonry.cols,1)};jQuery.enviratope.prototype._masonryReset=function(){this.masonry={};this._getMasonryGutterColumns();var a=this.masonry.cols;this.masonry.colYs=[];while(a--){this.masonry.colYs.push(0)}};jQuery.enviratope.prototype._masonryResizeChanged=function(){var a=this.masonry.cols;this._getMasonryGutterColumns();return(this.masonry.cols!==a)};
// Envirabox.
(function(l,o,i,e){var p=i("html"),d=i(l),a=i(o),q=i.envirabox=function(){q.open.apply(this,arguments)},k=navigator.userAgent.match(/msie/i),c=null,f=o.createTouch!==e,j=function(r){return r&&r.hasOwnProperty&&r instanceof i},b=function(r){return r&&i.type(r)==="string"},m=function(r){return b(r)&&r.indexOf("%")>0},h=function(r){return(r&&!(r.style.overflow&&r.style.overflow==="hidden")&&((r.clientWidth&&r.scrollWidth>r.clientWidth)||(r.clientHeight&&r.scrollHeight>r.clientHeight)))},n=function(t,s){var r=parseInt(t,10)||0;if(s&&m(t)){r=q.getViewport()[s]/100*r}return Math.ceil(r)},g=function(r,s){return n(r,s)+"px"};i.extend(q,{version:"2.1.5",defaults:{padding:15,margin:40,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:true,autoHeight:false,autoWidth:false,autoResize:true,autoCenter:!f,fitToView:true,aspectRatio:false,topRatio:0.5,leftRatio:0.5,scrolling:"auto",wrapCSS:"",arrows:true,closeBtn:true,closeClick:false,nextClick:false,mouseWheel:true,autoPlay:false,playSpeed:3000,preload:3,modal:false,loop:true,ajax:{dataType:"html",headers:{"X-envirabox":true}},iframe:{scrolling:"auto",preload:true},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:true,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="envirabox-wrap" tabIndex="-1"><div class="envirabox-skin"><div class="envirabox-outer"><div class="envirabox-inner"></div></div></div></div>',image:'<img class="envirabox-image" src="{href}" alt="" />',iframe:'<iframe id="envirabox-frame{rnd}" name="envirabox-frame{rnd}" class="envirabox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(k?' allowtransparency="true"':"")+"></iframe>",error:'<p class="envirabox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="envirabox-item envirabox-close" href="javascript:;"></a>',next:'<a title="Next" class="envirabox-nav envirabox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="envirabox-nav envirabox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:true,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:true,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:true,title:true},onCancel:i.noop,beforeLoad:i.noop,afterLoad:i.noop,beforeShow:i.noop,afterShow:i.noop,beforeChange:i.noop,beforeClose:i.noop,afterClose:i.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:false,isOpen:false,isOpened:false,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:false},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(s,r){if(!s){return}if(!i.isPlainObject(r)){r={}}if(false===q.close(true)){return}if(!i.isArray(s)){s=j(s)?i(s).get():[s]}i.each(s,function(x,y){var w={},t,B,z,A,v,C,u;if(i.type(y)==="object"){if(y.nodeType){y=i(y)}if(j(y)){w={href:y.data("envirabox-href")||y.attr("href"),title:i("<div/>").text(y.data("envirabox-title")||y.attr("title")).html(),isDom:true,element:y};if(i.metadata){i.extend(true,w,y.metadata())}}else{w=y}}t=r.href||w.href||(b(y)?y:null);B=r.title!==e?r.title:w.title||"";z=r.content||w.content;A=z?"html":(r.type||w.type);if(!A&&w.isDom){A=y.data("envirabox-type");if(!A){v=y.prop("class").match(/envirabox\.(\w+)/);A=v?v[1]:null}}if(b(t)){if(!A){if(q.isImage(t)){A="image"}else{if(q.isSWF(t)){A="swf"}else{if(t.charAt(0)==="#"){A="inline"}else{if(b(y)){A="html";z=y}}}}}if(A==="ajax"){C=t.split(/\s+/,2);t=C.shift();u=C.shift()}}if(!z){if(A==="inline"){if(t){z=i(b(t)?t.replace(/.*(?=#[^\s]+$)/,""):t)}else{if(w.isDom){z=y}}}else{if(A==="html"){z=t}else{if(!A&&!t&&w.isDom){A="inline";z=y}}}}i.extend(w,{href:t,type:A,content:z,title:B,selector:u});s[x]=w});q.opts=i.extend(true,{},q.defaults,r);if(r.keys!==e){q.opts.keys=r.keys?i.extend({},q.defaults.keys,r.keys):false}q.group=s;return q._start(q.opts.index)},cancel:function(){var r=q.coming;if(r&&false===q.trigger("onCancel")){return}q.hideLoading();if(!r){return}if(q.ajaxLoad){q.ajaxLoad.abort()}q.ajaxLoad=null;if(q.imgPreload){q.imgPreload.onload=q.imgPreload.onerror=null}if(r.wrap){r.wrap.stop(true,true).trigger("onReset").remove()}q.coming=null;if(!q.current){q._afterZoomOut(r)}},close:function(r){q.cancel();if(false===q.trigger("beforeClose")){return}q.unbindEvents();if(!q.isActive){return}if(!q.isOpen||r===true){i(".envirabox-wrap").stop(true).trigger("onReset").remove();q._afterZoomOut()}else{q.isOpen=q.isOpened=false;q.isClosing=true;i(".envirabox-item, .envirabox-nav").remove();q.wrap.stop(true,true).removeClass("envirabox-opened");q.transitions[q.current.closeMethod]()}},play:function(t){var r=function(){clearTimeout(q.player.timer)},v=function(){r();if(q.current&&q.player.isActive){q.player.timer=setTimeout(q.next,q.current.playSpeed)}},s=function(){r();a.unbind(".player");q.player.isActive=false;q.trigger("onPlayEnd")},u=function(){if(q.current&&(q.current.loop||q.current.index<q.group.length-1)){q.player.isActive=true;a.bind({"onCancel.player beforeClose.player":s,"onUpdate.player":v,"beforeLoad.player":r});v();q.trigger("onPlayStart")}};if(t===true||(!q.player.isActive&&t!==false)){u()}else{s()}},next:function(s){var r=q.current;if(r){if(!b(s)){s=r.direction.next}q.jumpto(r.index+1,s,"next")}},prev:function(s){var r=q.current;if(r){if(!b(s)){s=r.direction.prev}q.jumpto(r.index-1,s,"prev")}},jumpto:function(s,u,r){var t=q.current;if(!t){return}s=n(s);q.direction=u||t.direction[(s>=t.index?"next":"prev")];q.router=r||"jumpto";if(t.loop){if(s<0){s=t.group.length+(s%t.group.length)}s=s%t.group.length}if(t.group[s]!==e){q.cancel();q._start(s)}},reposition:function(u,r){var t=q.current,s=t?t.wrap:null,v;if(s){v=q._getPosition(r);if(u&&u.type==="scroll"){delete v.position;s.stop(true,true).animate(v,200)}else{s.css(v);t.pos=i.extend({},t.dim,v)}}},update:function(t){var r=(t&&t.originalEvent&&t.originalEvent.type),s=!r||r==="orientationchange";if(s){clearTimeout(c);c=null}if(!q.isOpen||c){return}c=setTimeout(function(){var u=q.current;if(!u||q.isClosing){return}q.wrap.removeClass("envirabox-tmp");if(s||r==="load"||(r==="resize"&&u.autoResize)){q._setDimension()}if(!(r==="scroll"&&u.canShrink)){q.reposition(t)}q.trigger("onUpdate");c=null},(s&&!f?0:300))},toggle:function(r){if(q.isOpen){q.current.fitToView=i.type(r)==="boolean"?r:!q.current.fitToView;if(f){q.wrap.removeAttr("style").addClass("envirabox-tmp");q.trigger("onUpdate")}q.update()}},hideLoading:function(){a.unbind(".loading");i("#envirabox-loading").remove()},showLoading:function(){var s,r;q.hideLoading();s=i('<div id="envirabox-loading"><div></div></div>').click(q.cancel).appendTo("body");a.bind("keydown.loading",function(t){if((t.which||t.keyCode)===27){t.preventDefault();q.cancel()}});if(!q.defaults.fixed){r=q.getViewport();s.css({position:"absolute",top:(r.h*0.5)+r.y,left:(r.w*0.5)+r.x})}q.trigger("onLoading")},getViewport:function(){var r=(q.current&&q.current.locked)||false,s={x:d.scrollLeft(),y:d.scrollTop()};if(r&&r.length){s.w=r[0].clientWidth;s.h=r[0].clientHeight}else{s.w=f&&l.innerWidth?l.innerWidth:d.width();s.h=f&&l.innerHeight?l.innerHeight:d.height()}return s},unbindEvents:function(){if(q.wrap&&j(q.wrap)){q.wrap.unbind(".fb")}a.unbind(".fb");d.unbind(".fb")},bindEvents:function(){var s=q.current,r;if(!s){return}d.bind("orientationchange.fb"+(f?"":" resize.fb")+(s.autoCenter&&!s.locked?" scroll.fb":""),q.update);r=s.keys;if(r){a.bind("keydown.fb",function(v){var t=v.which||v.keyCode,u=v.target||v.srcElement;if(t===27&&q.coming){return false}if(!v.ctrlKey&&!v.altKey&&!v.shiftKey&&!v.metaKey&&!(u&&(u.type||i(u).is("[contenteditable]")))){i.each(r,function(w,x){if(s.group.length>1&&x[t]!==e){q[w](x[t]);v.preventDefault();return false}if(i.inArray(t,x)>-1){q[w]();v.preventDefault();return false}})}})}if(i.fn.mousewheel&&s.mouseWheel){q.wrap.bind("mousewheel.fb",function(y,z,u,t){var x=y.target||null,v=i(x),w=false;while(v.length){if(w||v.is(".envirabox-skin")||v.is(".envirabox-wrap")){break}w=h(v[0]);v=i(v).parent()}if(z!==0&&!w){if(q.group.length>1&&!s.canShrink){if(t>0||u>0){q.prev(t>0?"down":"left")}else{if(t<0||u<0){q.next(t<0?"up":"right")}}y.preventDefault()}}})}},trigger:function(s,u){var r,t=u||q.coming||q.current;if(t){if(i.isFunction(t[s])){r=t[s].apply(t,Array.prototype.slice.call(arguments,1))}if(r===false){return false}if(t.helpers){i.each(t.helpers,function(w,v){if(v&&q.helpers[w]&&i.isFunction(q.helpers[w][s])){q.helpers[w][s](i.extend(true,{},q.helpers[w].defaults,v),t)}})}}a.trigger(s)},isImage:function(r){return b(r)&&r.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(r){return b(r)&&r.match(/\.(swf)((\?|#).*)?$/i)},_start:function(s){var t={},x,r,u,v,w;s=n(s);x=q.group[s]||null;if(!x){return false}t=i.extend(true,{},q.opts,x);v=t.margin;w=t.padding;if(i.type(v)==="number"){t.margin=[v,v,v,v]}if(i.type(w)==="number"){t.padding=[w,w,w,w]}if(t.modal){i.extend(true,t,{closeBtn:false,closeClick:false,nextClick:false,arrows:false,mouseWheel:false,keys:null,helpers:{overlay:{closeClick:false}}})}if(t.autoSize){t.autoWidth=t.autoHeight=true}if(t.width==="auto"){t.autoWidth=true}if(t.height==="auto"){t.autoHeight=true}t.group=q.group;t.index=s;q.coming=t;if(false===q.trigger("beforeLoad")){q.coming=null;return}u=t.type;r=t.href;if(!u){q.coming=null;if(q.current&&q.router&&q.router!=="jumpto"){q.current.index=s;return q[q.router](q.direction)}return false}q.isActive=true;if(u==="image"||u==="swf"){t.autoHeight=t.autoWidth=false;t.scrolling="visible"}if(u==="image"){t.aspectRatio=true}if(u==="iframe"&&f){t.scrolling="scroll"}t.wrap=i(t.tpl.wrap).addClass("envirabox-"+(f?"mobile":"desktop")+" envirabox-type-"+u+" envirabox-tmp "+t.wrapCSS).appendTo(t.parent||"body");i.extend(t,{skin:i(".envirabox-skin",t.wrap),outer:i(".envirabox-outer",t.wrap),inner:i(".envirabox-inner",t.wrap)});i.each(["Top","Right","Bottom","Left"],function(z,y){t.skin.css("padding"+y,g(t.padding[z]))});q.trigger("onReady");if(u==="inline"||u==="html"){if(!t.content||!t.content.length){return q._error("content")}}else{if(!r){return q._error("href")}}if(u==="image"){q._loadImage()}else{if(u==="ajax"){q._loadAjax()}else{if(u==="iframe"){q._loadIframe()}else{q._afterLoad()}}}},_error:function(r){i.extend(q.coming,{type:"html",autoWidth:true,autoHeight:true,minWidth:0,minHeight:0,scrolling:"no",hasError:r,content:q.coming.tpl.error});q._afterLoad()},_loadImage:function(){var r=q.imgPreload=new Image();r.onload=function(){this.onload=this.onerror=null;q.coming.width=this.width/q.opts.pixelRatio;q.coming.height=this.height/q.opts.pixelRatio;q._afterLoad()};r.onerror=function(){this.onload=this.onerror=null;q._error("image")};r.src=q.coming.href;if(r.complete!==true){q.showLoading()}},_loadAjax:function(){var r=q.coming;q.showLoading();q.ajaxLoad=i.ajax(i.extend({},r.ajax,{url:r.href,error:function(s,t){if(q.coming&&t!=="abort"){q._error("ajax",s)}else{q.hideLoading()}},success:function(s,t){if(t==="success"){r.content=s;q._afterLoad()}}}))},_loadIframe:function(){var r=q.coming,s=i(r.tpl.iframe.replace(/\{rnd\}/g,new Date().getTime())).attr("scrolling",f?"auto":r.iframe.scrolling).attr("src",r.href);i(r.wrap).bind("onReset",function(){try{i(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(t){}});if(r.iframe.preload){q.showLoading();s.one("load",function(){i(this).data("ready",1);if(!f){i(this).bind("load.fb",q.update)}i(this).parents(".envirabox-wrap").width("100%").removeClass("envirabox-tmp").show();q._afterLoad()})}r.content=s.appendTo(r.inner);if(!r.iframe.preload){q._afterLoad()}},_preloadImages:function(){var w=q.group,v=q.current,r=w.length,t=v.preload?Math.min(v.preload,r-1):0,u,s;for(s=1;s<=t;s+=1){u=w[(v.index+s)%r];if(u.type==="image"&&u.href){new Image().src=u.href}}},_afterLoad:function(){var s=q.coming,u=q.current,z="envirabox-placeholder",w,x,y,t,r,v;q.hideLoading();if(!s||q.isActive===false){return}if(false===q.trigger("afterLoad",s,u)){s.wrap.stop(true).trigger("onReset").remove();q.coming=null;return}if(u){q.trigger("beforeChange",u);u.wrap.stop(true).removeClass("envirabox-opened").find(".envirabox-item, .envirabox-nav").remove()}q.unbindEvents();w=s;x=s.content;y=s.type;t=s.scrolling;i.extend(q,{wrap:w.wrap,skin:w.skin,outer:w.outer,inner:w.inner,current:w,previous:u});r=w.href;switch(y){case"inline":case"ajax":case"html":if(w.selector){x=i("<div>").html(x).find(w.selector)}else{if(j(x)){if(!x.data(z)){x.data(z,i('<div class="'+z+'"></div>').insertAfter(x).hide())}x=x.show().detach();w.wrap.bind("onReset",function(){if(i(this).find(x).length){x.hide().replaceAll(x.data(z)).data(z,false)}})}}break;case"image":x=w.tpl.image.replace(/\{href\}/g,r);break;case"swf":x='<object id="envirabox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+r+'"></param>';v="";i.each(w.swf,function(A,B){x+='<param name="'+A+'" value="'+B+'"></param>';v+=" "+A+'="'+B+'"'});x+='<embed src="'+r+'" type="application/x-shockwave-flash" width="100%" height="100%"'+v+"></embed></object>";break}if(!(j(x)&&x.parent().is(w.inner))){w.inner.append(x)}q.trigger("beforeShow");w.inner.css("overflow",t==="yes"?"scroll":(t==="no"?"hidden":t));q._setDimension();q.reposition();q.isOpen=false;q.coming=null;q.bindEvents();if(!q.isOpened){i(".envirabox-wrap").not(w.wrap).stop(true).trigger("onReset").remove()}else{if(u.prevMethod){q.transitions[u.prevMethod]()}}q.transitions[q.isOpened?w.nextMethod:w.openMethod]();q._preloadImages()},_setDimension:function(){var U=q.getViewport(),Q=0,W=false,Y=false,C=q.wrap,O=q.skin,Z=q.inner,L=q.current,M=L.width,J=L.height,F=L.minWidth,y=L.minHeight,S=L.maxWidth,K=L.maxHeight,E=L.scrolling,w=L.scrollOutside?L.scrollbarWidth:0,I=L.margin,x=n(I[1]+I[3]),v=n(I[0]+I[2]),t,s,P,R,H,G,N,A,z,V,u,X,r,B,D;C.add(O).add(Z).width("auto").height("auto").removeClass("envirabox-tmp");t=n(O.outerWidth(true)-O.width());s=n(O.outerHeight(true)-O.height());P=x+t;R=v+s;H=m(M)?(U.w-P)*n(M)/100:M;G=m(J)?(U.h-R)*n(J)/100:J;if(L.type==="iframe"){B=L.content;if(L.autoHeight&&B.data("ready")===1){try{if(B[0].contentWindow.document.location){Z.width(H).height(9999);D=B.contents().find("body");if(w){D.css("overflow-x","hidden")}G=D.outerHeight(true)}}catch(T){}}}else{if(L.autoWidth||L.autoHeight){Z.addClass("envirabox-tmp");if(!L.autoWidth){Z.width(H)}if(!L.autoHeight){Z.height(G)}if(L.autoWidth){H=Z.width()}if(L.autoHeight){G=Z.height()}Z.removeClass("envirabox-tmp")}}M=n(H);J=n(G);z=H/G;F=n(m(F)?n(F,"w")-P:F);S=n(m(S)?n(S,"w")-P:S);y=n(m(y)?n(y,"h")-R:y);K=n(m(K)?n(K,"h")-R:K);N=S;A=K;if(L.fitToView){S=Math.min(U.w-P,S);K=Math.min(U.h-R,K)}X=U.w-x;r=U.h-v;if(L.aspectRatio){if(M>S){M=S;J=n(M/z)}if(J>K){J=K;M=n(J*z)}if(M<F){M=F;J=n(M/z)}if(J<y){J=y;M=n(J*z)}}else{M=Math.max(F,Math.min(M,S));if(L.autoHeight&&L.type!=="iframe"){Z.width(M);J=Z.height()}J=Math.max(y,Math.min(J,K))}if(L.fitToView){Z.width(M).height(J);C.width(M+t);V=C.width();u=C.height();if(L.aspectRatio){while((V>X||u>r)&&M>F&&J>y){if(Q++>19){break}J=Math.max(y,Math.min(K,J-10));M=n(J*z);if(M<F){M=F;J=n(M/z)}if(M>S){M=S;J=n(M/z)}Z.width(M).height(J);C.width(M+t);V=C.width();u=C.height()}}else{M=Math.max(F,Math.min(M,M-(V-X)));J=Math.max(y,Math.min(J,J-(u-r)))}}if(w&&E==="auto"&&J<G&&(M+t+w)<X){M+=w}Z.width(M).height(J);C.width(M+t);V=C.width();u=C.height();W=(V>X||u>r)&&M>F&&J>y;Y=L.aspectRatio?(M<N&&J<A&&M<H&&J<G):((M<N||J<A)&&(M<H||J<G));i.extend(L,{dim:{width:g(V),height:g(u)},origWidth:H,origHeight:G,canShrink:W,canExpand:Y,wPadding:t,hPadding:s,wrapSpace:u-O.outerHeight(true),skinSpace:O.height()-J});if(!B&&L.autoHeight&&J>y&&J<K&&!Y){Z.height("auto")}},_getPosition:function(t){var x=q.current,s=q.getViewport(),v=x.margin,u=q.wrap.width()+v[1]+v[3],r=q.wrap.height()+v[0]+v[2],w={position:"absolute",top:v[0],left:v[3]};if(x.helpers.title.type&&"float"==x.helpers.title.type){r=r+i(".envirabox-skin .envirabox-title").height()}if(x.autoCenter&&x.fixed&&!t&&r<=s.h&&u<=s.w){w.position="fixed"}else{if(!x.locked){w.top+=s.y;w.left+=s.x}}w.top=g(Math.max(w.top,w.top+((s.h-r)*x.topRatio)));w.left=g(Math.max(w.left,w.left+((s.w-u)*x.leftRatio)));return w},_afterZoomIn:function(){var r=q.current;if(!r){return}q.isOpen=q.isOpened=true;q.wrap.css("overflow","visible").addClass("envirabox-opened").hide().show(0);q.update();if(r.closeClick||(r.nextClick&&q.group.length>1)){q.inner.css("cursor","pointer").bind("click.fb",function(s){if(!i(s.target).is("a")&&!i(s.target).parent().is("a")){s.preventDefault();q[r.closeClick?"close":"next"]()}})}if(r.closeBtn){i(r.tpl.closeBtn).appendTo(q.skin).bind("click.fb",function(s){s.preventDefault();q.close()})}if(r.arrows&&q.group.length>1){if(r.loop||r.index>0){i(r.tpl.prev).appendTo(q.outer).bind("click.fb",q.prev)}if(r.loop||r.index<q.group.length-1){i(r.tpl.next).appendTo(q.outer).bind("click.fb",q.next)}}q.trigger("afterShow");if(!r.loop&&r.index===r.group.length-1){q.play(false)}else{if(q.opts.autoPlay&&!q.player.isActive){q.opts.autoPlay=false;q.play(true)}}},_afterZoomOut:function(r){r=r||q.current;i(".envirabox-wrap").trigger("onReset").remove();i.extend(q,{group:{},opts:{},router:false,current:null,isActive:false,isOpened:false,isOpen:false,isClosing:false,wrap:null,skin:null,outer:null,inner:null});q.trigger("afterClose",r)}});q.transitions={getOrigPosition:function(){var u=q.current,s=u.element,x=u.orig,w={},r=50,y=50,v=u.hPadding,z=u.wPadding,t=q.getViewport();if(!x&&u.isDom&&s.is(":visible")){x=s.find("img:first");if(!x.length){x=s}}if(j(x)){w=x.offset();if(x.is("img")){r=x.outerWidth();y=x.outerHeight()}}else{w.top=t.y+(t.h-y)*u.topRatio;w.left=t.x+(t.w-r)*u.leftRatio}if(q.wrap.css("position")==="fixed"||u.locked){w.top-=t.y;w.left-=t.x}w={top:g(w.top-v*u.topRatio),left:g(w.left-z*u.leftRatio),width:g(r+z),height:g(y+v)};return w},step:function(s,t){var v,x,y,r=t.prop,u=q.current,w=u.wrapSpace,z=u.skinSpace;if(r==="width"||r==="height"){v=t.end===t.start?1:(s-t.start)/(t.end-t.start);if(q.isClosing){v=1-v}x=r==="width"?u.wPadding:u.hPadding;y=s-x;q.skin[r](n(r==="width"?y:y-(w*v)));q.inner[r](n(r==="width"?y:y-(w*v)-(z*v)))}},zoomIn:function(){var v=q.current,s=v.pos,t=v.openEffect,u=t==="elastic",r=i.extend({opacity:1},s);delete r.position;if(u){s=this.getOrigPosition();if(v.openOpacity){s.opacity=0.1}}else{if(t==="fade"){s.opacity=0.1}}q.wrap.css(s).animate(r,{duration:t==="none"?0:v.openSpeed,easing:v.openEasing,step:u?this.step:null,complete:q._afterZoomIn})},zoomOut:function(){var u=q.current,s=u.closeEffect,t=s==="elastic",r={opacity:0.1};if(t){r=this.getOrigPosition();if(u.closeOpacity){r.opacity=0.1}}q.wrap.animate(r,{duration:s==="none"?0:u.closeSpeed,easing:u.closeEasing,step:t?this.step:null,complete:q._afterZoomOut})},changeIn:function(){var w=q.current,t=w.nextEffect,s=w.pos,r={opacity:1},v=q.direction,x=200,u;s.opacity=0.1;if(t==="elastic"){u=v==="down"||v==="up"?"top":"left";if(v==="down"||v==="right"){s[u]=g(n(s[u])-x);r[u]="+="+x+"px"}else{s[u]=g(n(s[u])+x);r[u]="-="+x+"px"}}if(t==="none"){q._afterZoomIn()}else{q.wrap.css(s).animate(r,{duration:w.nextSpeed,easing:w.nextEasing,complete:q._afterZoomIn})}},changeOut:function(){var t=q.previous,s=t.prevEffect,r={opacity:0.1},u=q.direction,v=200;if(s==="elastic"){r[u==="down"||u==="up"?"top":"left"]=(u==="up"||u==="left"?"-":"+")+"="+v+"px"}t.wrap.animate(r,{duration:s==="none"?0:t.prevSpeed,easing:t.prevEasing,complete:function(){i(this).trigger("onReset").remove()}})}};q.helpers.overlay={defaults:{closeClick:true,speedOut:200,showEarly:true,css:{},locked:!f,fixed:true},overlay:null,fixed:false,el:i("html"),create:function(s){var r;s=i.extend({},this.defaults,s);if(this.overlay){this.close()}r=q.coming?q.coming.parent:s.parent;this.overlay=i('<div class="envirabox-overlay"></div>').appendTo(r&&r.lenth?r:"body");this.fixed=false;if(s.fixed&&q.defaults.fixed){this.overlay.addClass("envirabox-overlay-fixed");this.fixed=true}},open:function(s){var r=this;s=i.extend({},this.defaults,s);if(this.overlay){this.overlay.unbind(".overlay").width("auto").height("auto")}else{this.create(s)}if(!this.fixed){d.bind("resize.overlay",i.proxy(this.update,this));this.update()}if(s.closeClick){this.overlay.bind("click.overlay",function(t){if(i(t.target).hasClass("envirabox-overlay")){if(q.isActive){q.close()}else{r.close()}return false}})}this.overlay.css(s.css).show()},close:function(){d.unbind("resize.overlay");if(this.el.hasClass("envirabox-lock")){i(".envirabox-margin").removeClass("envirabox-margin");this.el.removeClass("envirabox-lock");d.scrollTop(this.scrollV).scrollLeft(this.scrollH)}i(".envirabox-overlay").remove().hide();i.extend(this,{overlay:null,fixed:false})},update:function(){var s="100%",r;this.overlay.width(s).height("100%");if(k){r=Math.max(o.documentElement.offsetWidth,o.body.offsetWidth);if(a.width()>r){s=a.width()}}else{if(a.width()>d.width()){s=a.width()}}this.overlay.width(s).height(a.height())},onReady:function(s,t){var r=this.overlay;i(".envirabox-overlay").stop(true,true);if(!r){this.create(s)}if(s.locked&&this.fixed&&t.fixed){t.locked=this.overlay.append(t.wrap);t.fixed=false}if(s.showEarly===true){this.beforeShow.apply(this,arguments)}},beforeShow:function(r,s){if(s.locked&&!this.el.hasClass("envirabox-lock")){if(this.fixPosition!==false){i("*").filter(function(){return(i(this).css("position")==="fixed"&&!i(this).hasClass("envirabox-overlay")&&!i(this).hasClass("envirabox-wrap"))}).addClass("envirabox-margin")}this.el.addClass("envirabox-margin");this.scrollV=d.scrollTop();this.scrollH=d.scrollLeft();this.el.addClass("envirabox-lock");d.scrollTop(this.scrollV).scrollLeft(this.scrollH)}this.open(r)},onUpdate:function(){if(!this.fixed){this.update()}},afterClose:function(r){if(this.overlay&&!q.coming){this.overlay.fadeOut(r.speedOut,i.proxy(this.close,this))}}};q.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(s){var u=q.current,w=u.title,r=s.type,v,t;if(i.isFunction(w)){w=w.call(u.element,u)}if(!b(w)||i.trim(w)===""){return}v=i('<div class="envirabox-title envirabox-title-'+r+'-wrap">'+w+"</div>");switch(r){case"inside":t=q.skin;break;case"outside":t=q.wrap;break;case"over":t=q.inner;break;default:t=q.skin;v.appendTo("body");if(k){v.width(v.width())}v.wrapInner('<span class="child"></span>');q.current.margin[2]+=Math.abs(n(v.css("margin-bottom")));break}v[(s.position==="top"?"prependTo":"appendTo")](t)}};i.fn.envirabox=function(t){var s,u=i(this),r=this.selector||"",v=function(z){var y=i(this).blur(),w=s,x,A;if(!(z.ctrlKey||z.altKey||z.shiftKey||z.metaKey)&&!y.is(".envirabox-wrap")){x=t.groupAttr||"data-envirabox-group";A=y.attr(x);if(!A){x="rel";A=y.get(0)[x]}if(A&&A!==""&&A!=="nofollow"){y=r.length?i(r):u;y=y.filter("["+x+'="'+A+'"]');w=y.index(this)}t.index=w;if(q.open(y,t)!==false){z.preventDefault()}}};t=t||{};s=t.index||0;if(!r||t.live===false){u.unbind("click.fb-start").bind("click.fb-start",v)}else{a.undelegate(r,"click.fb-start").delegate(r+":not('.envirabox-item, .envirabox-nav')","click.fb-start",v)}this.filter("[data-envirabox-start=1]").trigger("click");return this};a.ready(function(){var s,r;if(i.scrollbarWidth===e){i.scrollbarWidth=function(){var u=i('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),v=u.children(),t=v.innerWidth()-v.height(99).innerWidth();u.remove();return t}}if(i.support.fixedPosition===e){i.support.fixedPosition=(function(){var u=i('<div style="position:fixed;top:20px;"></div>').appendTo("body"),t=(u[0].offsetTop===20||u[0].offsetTop===15);u.remove();return t}())}i.extend(q.defaults,{scrollbarWidth:i.scrollbarWidth(),fixed:i.support.fixedPosition,parent:i("body")});s=i(l).width();p.addClass("envirabox-lock-test");r=i(l).width();p.removeClass("envirabox-lock-test");i("<style type='text/css'>.envirabox-margin{margin-right:"+(r-s)+"px;}</style>").appendTo("head")})}(window,document,jQuery));
/*!
 * Thumbnail helper for envirabox
 * version: 1.0.7 (Mon, 01 Oct 2012)
 * @requires envirabox v2.0 or later
 */
!function(t){var i=t.envirabox;i.helpers.thumbs={defaults:{width:50,height:50,position:"bottom",source:function(i){var h;return i.element&&(h=t(i.element).find("img").attr("src")),!h&&"image"===i.type&&i.href&&(h=i.href),h}},wrap:null,list:null,width:0,init:function(i,h){var e,s=this,o=i.width,n=i.height,r=i.source;e="";for(var l=0;l<h.group.length;l++)e+='<li><a style="width:'+o+"px;height:"+n+'px;" href="javascript:jQuery.envirabox.jumpto('+l+');"></a></li>';this.wrap=t('<div id="envirabox-thumbs"></div>').addClass(i.position).appendTo("body"),this.list=t("<ul>"+e+"</ul>").appendTo(this.wrap),t.each(h.group,function(i){var e=h.group[i],l=r(e);l&&t("<img />").load(function(){var h,e,r,l=this.width,a=this.height;s.list&&l&&a&&(h=l/o,e=a/n,r=s.list.children().eq(i).find("a"),h>=1&&e>=1&&(h>e?(l=Math.floor(l/e),a=n):(l=o,a=Math.floor(a/h))),t(this).css({width:l,height:a,top:Math.floor(n/2-a/2),left:Math.floor(o/2-l/2)}),r.width(o).height(n),t(this).hide().appendTo(r).fadeIn(300))}).attr("src",l).attr("title",e.title)}),this.width=this.list.children().eq(0).outerWidth(!0)+2,console.log(this.width),this.list.width(this.width*(h.group.length+1)).css("left",Math.floor(.5*t(window).width()-(h.index*this.width+.5*this.width)))},beforeLoad:function(t,i){return i.group.length<2?void(i.helpers.thumbs=!1):void(i.margin["top"===t.position?0:2]+=t.height+15)},afterShow:function(t,i){this.list?this.onUpdate(t,i):this.init(t,i),this.list.children().removeClass("active").eq(i.index).addClass("active")},onUpdate:function(i,h){this.list&&this.list.stop(!0).animate({left:Math.floor(.5*t(window).width()-(h.index*this.width+.5*this.width))},150)},beforeClose:function(){this.wrap&&this.wrap.remove(),this.wrap=null,this.list=null,this.width=0}}}(jQuery);
/*!
 * Buttons helper for envirabox
 * version: 1.0.5 (Mon, 15 Oct 2012)
 * @requires envirabox v2.0 or later
 */
(function(b){var a=b.envirabox;a.helpers.buttons={defaults:{skipSingle:false,position:"top",tpl:'<div id="envirabox-buttons"><ul><li><a class="btnPrev" title="Previous" href="javascript:;"></a></li><li><a class="btnPlay" title="Start slideshow" href="javascript:;"></a></li><li><a class="btnNext" title="Next" href="javascript:;"></a></li><li><a class="btnToggle" title="Toggle size" href="javascript:;"></a></li><li><a class="btnClose" title="Close" href="javascript:;"></a></li></ul></div>'},list:null,buttons:null,beforeLoad:function(c,d){if(c.skipSingle&&d.group.length<2){d.helpers.buttons=false;d.closeBtn=true;return}d.margin[c.position==="bottom"?2:0]+=30},onPlayStart:function(){if(this.buttons){this.buttons.play.attr("title","Pause slideshow").addClass("btnPlayOn")}},onPlayEnd:function(){if(this.buttons){this.buttons.play.attr("title","Start slideshow").removeClass("btnPlayOn")}},afterShow:function(d,e){var c=this.buttons;if(!c){this.list=b(d.tpl).addClass(d.position).appendTo("body");c={prev:this.list.find(".btnPrev").click(a.prev),next:this.list.find(".btnNext").click(a.next),play:this.list.find(".btnPlay").click(a.play),toggle:this.list.find(".btnToggle").click(a.toggle),close:this.list.find(".btnClose").click(a.close)}}if(e.index>0||e.loop){c.prev.removeClass("btnDisabled")}else{c.prev.addClass("btnDisabled")}if(e.loop||e.index<e.group.length-1){c.next.removeClass("btnDisabled");c.play.removeClass("btnDisabled")}else{c.next.addClass("btnDisabled");c.play.addClass("btnDisabled")}this.buttons=c;this.onUpdate(d,e)},onUpdate:function(d,e){var c;if(!this.buttons){return}c=this.buttons.toggle.removeClass("btnDisabled btnToggleOn");if(e.canShrink){c.addClass("btnToggleOn")}else{if(!e.canExpand){c.addClass("btnDisabled")}}},beforeClose:function(){if(this.list){this.list.remove()}this.list=null;this.buttons=null}}}(jQuery));
/*!
 * Media helper for envirabox
 * version: 1.0.6 (Fri, 14 Jun 2013)
 * @requires envirabox v2.0 or later
 */
(function(b){var a=b.envirabox,c=function(d,e,f){f=f||"";if(b.type(f)==="object"){f=b.param(f,true)}b.each(e,function(g,h){d=d.replace("$"+g,h||"")});if(f.length){d+=(d.indexOf("?")>0?"&":"?")+f}return d};a.helpers.media={defaults:{youtube:{matcher:/(youtube\.com|youtu\.be|youtube-nocookie\.com)\/(watch\?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*)).*/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"opaque",enablejsapi:1},type:"iframe",url:"//www.youtube.com/embed/$3"},vimeo:{matcher:/(?:vimeo(?:pro)?.com)\/(?:[^\d]+)?(\d+)(?:.*)/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1},type:"iframe",url:"//player.vimeo.com/video/$1"},metacafe:{matcher:/metacafe.com\/(?:watch|fplayer)\/([\w\-]{1,10})/,params:{autoPlay:"yes"},type:"swf",url:function(e,f,d){d.swf.flashVars="playerVars="+b.param(f,true);return"//www.metacafe.com/fplayer/"+e[1]+"/.swf"}},dailymotion:{matcher:/dailymotion.com\/video\/(.*)\/?(.*)/,params:{additionalInfos:0,autoStart:1},type:"swf",url:"//www.dailymotion.com/swf/video/$1"},twitvid:{matcher:/twitvid\.com\/([a-zA-Z0-9_\-\?\=]+)/i,params:{autoplay:0},type:"iframe",url:"//www.twitvid.com/embed.php?guid=$1"},twitpic:{matcher:/twitpic\.com\/(?!(?:place|photos|events)\/)([a-zA-Z0-9\?\=\-]+)/i,type:"image",url:"//twitpic.com/show/full/$1/"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/?size=l"},google_maps:{matcher:/maps\.google\.([a-z]{2,3}(\.[a-z]{2})?)\/(\?ll=|maps\?)(.*)/i,type:"iframe",url:function(d){return"//maps.google."+d[1]+"/"+d[3]+""+d[4]+"&output="+(d[4].indexOf("layer=c")>0?"svembed":"embed")}}},beforeLoad:function(g,j){var d=j.href||"",e=false,i,f,h,k;for(i in g){if(g.hasOwnProperty(i)){f=g[i];h=d.match(f.matcher);if(h){e=f.type;k=b.extend(true,{},f.params,j[i]||(b.isPlainObject(g[i])?g[i].params:null));d=b.type(f.url)==="function"?f.url.call(this,h,k,j):c(f.url,h,k);break}}}if(e){j.href=d;j.type=e;j.autoHeight=false}}}}(jQuery));
/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.9
 *
 * Requires: jQuery 1.2.2+
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){module.exports=a}else{a(jQuery)}}}(function(c){var d=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],k=("onwheel" in document||document.documentMode>=9)?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],h=Array.prototype.slice,j,b;if(c.event.fixHooks){for(var e=d.length;e;){c.event.fixHooks[d[--e]]=c.event.mouseHooks}}var f=c.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener){for(var m=k.length;m;){this.addEventListener(k[--m],l,false)}}else{this.onmousewheel=l}c.data(this,"mousewheel-line-height",f.getLineHeight(this));c.data(this,"mousewheel-page-height",f.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var m=k.length;m;){this.removeEventListener(k[--m],l,false)}}else{this.onmousewheel=null}},getLineHeight:function(i){return parseInt(c(i)["offsetParent" in c.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(i){return c(i).height()},settings:{adjustOldDeltas:true}};c.fn.extend({mousewheel:function(i){return i?this.bind("mousewheel",i):this.trigger("mousewheel")},unmousewheel:function(i){return this.unbind("mousewheel",i)}});function l(i){var n=i||window.event,r=h.call(arguments,1),t=0,p=0,o=0,q=0;i=c.event.fix(n);i.type="mousewheel";if("detail" in n){o=n.detail*-1}if("wheelDelta" in n){o=n.wheelDelta}if("wheelDeltaY" in n){o=n.wheelDeltaY}if("wheelDeltaX" in n){p=n.wheelDeltaX*-1}if("axis" in n&&n.axis===n.HORIZONTAL_AXIS){p=o*-1;o=0}t=o===0?p:o;if("deltaY" in n){o=n.deltaY*-1;t=o}if("deltaX" in n){p=n.deltaX;if(o===0){t=p*-1}}if(o===0&&p===0){return}if(n.deltaMode===1){var s=c.data(this,"mousewheel-line-height");t*=s;o*=s;p*=s}else{if(n.deltaMode===2){var m=c.data(this,"mousewheel-page-height");t*=m;o*=m;p*=m}}q=Math.max(Math.abs(o),Math.abs(p));if(!b||q<b){b=q;if(a(n,q)){b/=40}}if(a(n,q)){t/=40;p/=40;o/=40}t=Math[t>=1?"floor":"ceil"](t/b);p=Math[p>=1?"floor":"ceil"](p/b);o=Math[o>=1?"floor":"ceil"](o/b);i.deltaX=p;i.deltaY=o;i.deltaFactor=b;i.deltaMode=0;r.unshift(i,t,p,o);if(j){clearTimeout(j)}j=setTimeout(g,200);return(c.event.dispatch||c.event.handle).apply(this,r)}function g(){b=null}function a(m,i){return f.settings.adjustOldDeltas&&m.type==="mousewheel"&&i%120===0}}));
// Envira functions.
function enviraGetColWidth(a,e){var d,c=jQuery(window).width(),b=a.data("envira-columns");switch(b){case 1:d=a.width();break;case 2:if(c<=480){d=a.width()}else{d=a.width()/2}break;case 3:if(c<=480){d=a.width()}else{if(c<=768){d=a.width()/2}else{d=a.width()/3}}case 4:case 5:case 6:if(c<=480){d=a.width()}else{if(c<=768){d=a.width()/2}else{if(c<=1024){d=a.width()/3}else{d=a.width()/b}}}break}return parseInt(d-(e*(b-1))/b)}function enviraSetWidths(a,c){var b=enviraGetColWidth(a,c);a.children().css({width:b})};function enviraIsMobile(){var check = false;(function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check=true})(navigator.userAgent||navigator.vendor||window.opera);return check;}function enviraThrottle(a,b){return function(){var d=this,c=[].slice(arguments);clearTimeout(a._throttleTimeout);a._throttleTimeout=setTimeout(function(){a.apply(d,c)},b)}};